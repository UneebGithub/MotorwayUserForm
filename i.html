<!doctype html>
<html lang="ur">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vehicle Registration Form — FYP Demo</title>
  <style>
    :root{
      --bg:#f7f9fc; --card:#ffffff; --accent:#0b63d6; --muted:#666;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans',sans-serif;background:var(--bg);color:#111}
    .container{max-width:900px;margin:24px auto;padding:16px}
    .note{background:#fff3cd;border-left:4px solid #ffecb5;padding:12px;border-radius:6px;margin-bottom:16px;color:#5b4217}
    .card{background:var(--card);padding:16px;border-radius:10px;box-shadow:0 6px 20px rgba(12,20,50,0.06)}
    h1{margin:0 0 8px;font-size:20px}
    form{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type="text"], input[type="tel"], input[type="number"], input[type="email"], select {
      width:100%;padding:10px;border:1px solid #e6eef8;border-radius:8px;font-size:15px;background:#fff
    }
    .full{grid-column:1/-1}
    .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
    button{background:var(--accent);color:#fff;padding:10px 14px;border-radius:8px;border:0;font-weight:600}
    button.secondary{background:#e5eefc;color:var(--accent);border:1px solid #cfe1ff}
    @media (max-width:720px){
      form{grid-template-columns:1fr}
      .actions{justify-content:stretch}
    }
    .small{font-size:13px;color:var(--muted)}
    .success{background:#e6ffef;border-left:4px solid #9ef0b6;padding:10px;border-radius:6px;margin-top:12px;color:#0b5f3a}
    .error{background:#ffecec;border-left:4px solid #ff9b9b;padding:10px;border-radius:6px;margin-top:12px;color:#7a1919}
  </style>
</head>
<body>

  <div class="container">
    <h1  style="color:rgb(205, 13, 176);">Motorway Agency - FYP (Demonstration Project for Data Collection & Analysis)</h1><br>
    <!-- <p>UneebUllah,Khizar Lodhi & Shamir Satti</p> -->


    <div class="note">
      <strong  style="color:red;">Note:</strong > This form is for <em>FYP / development</em> demonstration purposes only. For production use, proper legal approvals and security measures must be applied.

    </div>

    <div class="card">
      <h1 id="title"">Vehicle Registration Form (Excise) — Demo</h1>
      <p class="small" style="color:rgb(20, 10, 206);">Owner aur vehicle ki tamam details bhar ke "Next" par click karein. CNIC 13 digits hona chahiye.</p>

      <form id="regForm">
        <!-- Owner Information -->
        <div class="full"><strong>1) Owner’s Information</strong></div>
        <div>
          <label>Owner’s Full Name (as per CNIC)</label>
          <input type="text" name="ownerName" required />
        </div>
        <div>
          <label>Father's Name</label>
          <input type="text" name="fatherName" />
        </div>
        <div>
          <label>CNIC Number (13 digits)</label>
          <input type="text" name="cnic" placeholder="1234512345671" maxlength="13" required pattern="\d{13}" />
        </div>
        <div>
          <label>Mobile Number</label>
          <input type="tel" name="mobile" placeholder="+92xxxxxxxxxx" />
        </div>
        <div class="full">
          <label>Present Address</label>
          <input type="text" name="presentAddress" />
        </div>
        <div class="full">
          <label>Permanent Address</label>
          <input type="text" name="permanentAddress" />
        </div>
        <div>
          <label>Email (optional)</label>
          <input type="email" name="email" />
        </div>

        <!-- Vehicle Particulars -->
        <div class="full"><strong>2) Vehicle Particulars</strong></div>
        <div>
          <label>Make / Company</label>
          <input type="text" name="make" />
        </div>
        <div>
          <label>Model / Year</label>
          <input type="text" name="model" />
        </div>
        <div>
          <label>Chassis Number</label>
          <input type="text" name="chassis" />
        </div>
         <div>
         <div>
  <label>Number Plate</label>
  <input type="text" name="carNumberPlate" id="carNumberPlate" maxlength="10" placeholder="ABC1234" required />
</div>

        </div>
        <div>
          <label>Engine Number</label>
          <input type="text" name="engine" />
        </div>
        <div>
          <label>Color</label>
          <input type="text" name="color" />
        </div>
        <div>
          <label>Vehicle Type</label>
          <select name="vehicleType">
            <option value="Car">Car</option>
            <option value="Jeep">Jeep</option>
            <option value="Bus">Bus</option>
            <option value="Truck">Truck</option>
            <option value="Motorcycle">Motorcycle</option>
          </select>
        </div>
        <div>
          <label>Fuel Type</label>
          <select name="fuelType">
            <option>Petrol</option><option>Diesel</option><option>Electric</option><option>Hybrid</option>
          </select>
        </div>
        <div>
          <label>Seating Capacity</label>
          <input type="number" name="seating" min="1" />
        </div>
        <div>
          <label>Cubic Capacity (CC)</label>
          <input type="number" name="cc" />
        </div>
        <div class="full">
          <label>Purpose of Use</label>
          <select name="purpose">
            <option>Private</option><option>Commercial</option><option>Government</option>
          </select>
        </div>

        <!-- Purchase Details -->
        <div class="full"><strong>3) Purchase Details</strong></div>
        <div>
          <label>Invoice Number</label>
          <input type="text" name="invoiceNo" />
        </div>
        <div>
          <label>Invoice Date</label>
          <input type="text" name="invoiceDate" placeholder="YYYY-MM-DD" />
        </div>
        <div>
          <label>Purchase Price</label>
          <input type="number" name="purchasePrice" />
        </div>
        <div>
          <label>Dealer Name</label>
          <input type="text" name="dealerName" />
        </div>
        <div class="full">
          <label>Dealer NTN / Address</label>
          <input type="text" name="dealerInfo" />
        </div>

        <!-- Tax / Fee (office use) -->
        <div class="full"><strong>4) Tax / Fee Section (Office use)</strong></div>
        <div>
          <label>Registration Fee</label><input type="number" name="registrationFee" />
        </div>
        <div>
          <label>Motor Vehicle Tax</label><input type="number" name="vehicleTax" />
        </div>
        <div>
          <label>Token Tax</label><input type="number" name="tokenTax" />
        </div>
        <div>
          <label>Smart Card Fee</label><input type="number" name="smartCardFee" />
        </div>
        <div class="full">
          <label>Number Plate Fee</label><input type="number" name="plateFee" />
        </div>

        <div class="full actions">
          <button type="button" class="secondary" id="resetBtn">Reset</button>
          <button type="submit" id="submitBtn">Next — Save</button>
        </div>

        <div id="msg" class="full"></div>
      </form>
    </div>
  </div>
<script>
  const form = document.getElementById('regForm');
  const msg = document.getElementById('msg');
  const resetBtn = document.getElementById('resetBtn');
  const plateInput = document.getElementById('carNumberPlate');

  // -------------------
  // Reset form
  // -------------------
  resetBtn.addEventListener('click', () => form.reset());

  // -------------------
  // Number Plate: uppercase + remove invalid characters
  // -------------------
  plateInput.addEventListener('input', (e) => {
    let val = e.target.value.toUpperCase();     // Capital letters
    val = val.replace(/[^A-Z0-9]/g, '');        // Only A-Z and 0-9
    e.target.value = val;
  });

  // -------------------
  // Form submit
  // -------------------
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    msg.innerHTML = '';

    const fd = new FormData(form);
    const obj = {};
    for (const [k,v] of fd.entries()) obj[k]=v;

    // CNIC validation
    const cnic = (obj.cnic || '').trim();
    if (!/^\d{13}$/.test(cnic)){
      msg.innerHTML = '<div class="error">CNIC must be 13 digits.</div>'; 
      return;
    }

    try {
      document.getElementById('submitBtn').disabled = true;

      const res = await fetch('/api/register', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(obj)
      });

      const data = await res.json();

      if (res.ok){
        msg.innerHTML = '<div class="success">Saved successfully. CNIC: '+ cnic +'</div>';
        form.reset();
      } else {
        msg.innerHTML = '<div class="error">Error: '+ (data.message || 'Server error') +'</div>';
      }
    } catch(err){
      msg.innerHTML = '<div class="error">Network error: '+err.message+'</div>';
    } finally {
      document.getElementById('submitBtn').disabled = false;
    }
  });
</script>
<script>
  const title = document.getElementById('title');

  function getRandomColor() {
    
    const r = Math.floor(Math.random() * 256);
    const g = Math.floor(Math.random() * 256);
    const b = Math.floor(Math.random() * 256);
    return `rgb(${r},${g},${b})`;
  }

  
  setInterval(() => {
    title.style.color = getRandomColor();
  }, 200);
</script>

</body>
</html>

